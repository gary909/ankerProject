(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a(59)},34:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),s=a.n(c),o=(a(34),a(62)),l=a(2),i=a(3),u=a(5),m=a(4),d=a(6),h=a(61),p=a(16),g=a(63),f=a(27),E=a(11),v=a(9),b=a(24),O=a.n(b).a.create({baseURL:"/api",withCredentials:!0}),j=function(e){if(console.error(e),e.response&&e.response.data)throw console.error("API response",e.response.data),e.response.data.message;throw e},N={service:O,isLoggedIn:function(){return null!=localStorage.getItem("user")},getLocalStorageUser:function(){return JSON.parse(localStorage.getItem("user"))},signup:function(e){return O.post("/signup",e).then(function(e){return localStorage.setItem("user",JSON.stringify(e.data)),e.data}).catch(j)},login:function(e,t){return O.post("/login",{username:e,password:t}).then(function(e){return localStorage.setItem("user",JSON.stringify(e.data)),e.data}).catch(j)},logout:function(){return localStorage.removeItem("user"),O.get("/logout")},getSecret:function(){return O.get("/secret").then(function(e){return e.data}).catch(j)},addPicture:function(e){var t=new FormData;return t.append("picture",e),O.post("/endpoint/to/add/a/picture",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data}).catch(j)},getAudios:function(e){return O.get(e?"/upload?username=".concat(e):"/upload").then(function(e){return e.data}).catch(j)},getComments:function(e){return O.get("/comments?audioId=".concat(e)).then(function(e){return e.data}).catch(j)},getAllAudios:function(){return O.get("/getall-audio").then(function(e){return e.data}).catch(j)},addComments:function(e){return O.post("/comments",e).then(function(e){return e.data}).catch(j)},getProfile:function(){return O.get("/profile").then(function(e){return e.data}).catch(j)},postAudio:function(e){return O.post("/upload",e).then(function(e){return e.data}).catch(j)}},C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={username:"",email:"",password:"",image:"",message:null},a.handleInputChange=a.handleInputChange.bind(Object(v.a)(Object(v.a)(a))),a.handleClick=a.handleClick.bind(Object(v.a)(Object(v.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(E.a)({},e.target.name,e.target.value))}},{key:"handleClick",value:function(e){var t=this;e.preventDefault();var a={username:this.state.username,email:this.state.email,password:this.state.password};N.signup(a).then(function(e){t.props.history.push("/playfeed")}).catch(function(e){return t.setState({message:e.toString()})})}},{key:"render",value:function(){var e=this;return console.log(this.props),r.a.createElement("div",{className:"signup"},r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Username:")),r.a.createElement("div",null,r.a.createElement("input",{className:"textfield searchBar",type:"text",value:this.state.username,name:"username",onChange:this.handleInputChange})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"email"},"Email:")),r.a.createElement("div",null,r.a.createElement("input",{className:"textfieldname searchBar",type:"email",pattern:"[^ @]*@[^ @]*",value:this.state.email,name:"email",onChange:this.handleInputChange})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"Password:")),r.a.createElement("div",null,r.a.createElement("input",{className:"textfield searchBar",type:"password",value:this.state.password,name:"password",onChange:this.handleInputChange})),r.a.createElement("button",{className:"button",onClick:function(t){return e.handleClick(t)}},"Signup")),this.state.message&&r.a.createElement("div",{className:"info info-danger"},this.state.message))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={username:"",password:"",message:null},a.handleInputChange=a.handleInputChange.bind(Object(v.a)(Object(v.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(E.a)({},e.target.name,e.target.value))}},{key:"handleClick",value:function(e){var t=this;e.preventDefault(),N.login(this.state.username,this.state.password).then(function(e){console.log("SUCCESS!"),t.props.history.push("/")}).catch(function(e){return t.setState({message:e.toString()})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Login"},r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Username:")),r.a.createElement("div",null,r.a.createElement("input",{type:"text",className:"searchBar",value:this.state.username,name:"username",onChange:this.handleInputChange})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"Password:")),r.a.createElement("div",null,r.a.createElement("input",{type:"password",className:"searchBar",value:this.state.password,name:"password",onChange:this.handleInputChange})),r.a.createElement("button",{className:"button",onClick:function(t){return e.handleClick(t)}},"Login")),this.state.message&&r.a.createElement("div",{className:"info info-danger"},this.state.message))}}]),t}(n.Component),k=(n.Component,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log(this.props.backgroundNr),r.a.createElement("div",{className:this.props.color},r.a.createElement("div",{className:"audioTitleWrapper"},r.a.createElement("img",{className:"audioImage",src:"/images/hashtag.svg",alt:"Hashtag"}),r.a.createElement("h2",{className:"audioTitle"},this.props.hashtag)),r.a.createElement("div",{className:"audioFooter"},r.a.createElement("div",{className:"audioUser"},this.props.user.username)),r.a.createElement("audio",{controls:!0,class:"audio-seek-audiopost"},r.a.createElement("source",{src:this.props.url,type:"audio/mpeg"})))}},{key:"componentDidMount",value:function(){console.log("component did mount")}}]),t}(n.Component)),S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleSearchInput=function(e){console.log(a.state.search),a.setState({search:e.target.value})},a.state={apiHash:[],search:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.getAllAudios().then(function(t){return e.setState({apiHash:t.reverse()})}).catch(function(t){return e.setState({message:t.toString()})}),console.log(this.state.apiHash)}},{key:"render",value:function(){var e=this;return console.log(this.state.apiHash),r.a.createElement("div",{className:"Search"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"Looking for audio?"),r.a.createElement("div",null),r.a.createElement("input",{type:"text",name:"search",id:"",value:this.state.search,placeholder:"Search here",onChange:this.handleSearchInput,className:"searchBar"}),this.state.apiHash.filter(function(t){return t.hashtag.toLowerCase().includes(e.state.search.toLowerCase())}).map(function(e,t){return t%2===0?r.a.createElement(p.a,{to:"/playfeed/"+e.userId.username,style:{textDecoration:"none",color:"inherit"}},r.a.createElement(k,{key:t,backgroundNr:t,hashtag:e.hashtag,user:e.userId,url:e.videoURL,likes:e.likes,color:"audioWrapper"})):r.a.createElement(p.a,{to:"/playfeed/"+e.userId.username,style:{textDecoration:"none",color:"inherit"}},r.a.createElement(k,{key:t,backgroundNr:t,hashtag:e.hashtag,user:e.userId,url:e.videoURL,likes:e.likes,color:"audioWrapper2"}))}))}}]),t}(n.Component),w=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"Home"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"Title-logo"},r.a.createElement("div",null,r.a.createElement("img",{src:"./images/earLogo.png",className:"earLogo",alt:"logo"}),r.a.createElement("h3",{className:"App-title"},"AUDIOGRAM"),r.a.createElement("h3",null,"Sign in and be heard"),r.a.createElement("div",{className:"App-title"}))),r.a.createElement("div",null,r.a.createElement(S,null))))}}]),t}(n.Component),I=(n.Component,function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("img",{className:"titleImage",src:"./images/singer.jpg",alt:"profile"}),r.a.createElement("br",null),r.a.createElement("div",{className:"textIntro"},r.a.createElement("p",null,"Be Heard.")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}]),t}(n.Component)),L=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("img",{className:"titleImage",src:"./images/singer.jpg",alt:"profile"}),r.a.createElement("br",null),r.a.createElement("div",{className:"textIntro"},r.a.createElement("p",null,"Be Heard.")),r.a.createElement("div",null,r.a.createElement("audio",{controls:!0,className:"audContrl"},r.a.createElement("button",{type:"button",className:"play"}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}]),t}(n.Component),D=a(26),x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;a.setState({hashtag:t})},a.startRecording=function(){var e=a.state.countDownSeconds,t=setInterval(function(){e--,a.setState({countDownSeconds:e}),(a.state.countDownSeconds<0||!a.state.record)&&(clearInterval(t),a.setState({countDownSeconds:10}))},1e3);a.setState({record:!0}),setTimeout(function(){a.setState({record:!1})},1e4)},a.stopRecording=function(){a.setState({record:!1})},a.onStop=function(e){var t=e.blob;a.setState({blob:t})},a.saveRecorded=function(){var e=a.state.blob;console.log("stop");var t=new File([e],"videoURL"),n=new FormData;n.append("videoURL",t),n.append("hashtag",a.state.hashtag),N.postAudio(n).then(function(){a.props.history.push("/playfeed")}),console.log("recordedBlob is: ",e),console.log("formData: ",t)},a.handleClick=function(){a.saveRecorded()},a.state={record:!1,countDownSeconds:10,hashtag:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"onData",value:function(e){console.log("chunk of real-time data is: ",e)}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.countDownSeconds,r.a.createElement("br",null),r.a.createElement(D.a,{record:this.state.record,className:"sound-wavegit",onStop:this.onStop,onData:this.onData,strokeColor:"#000000",backgroundColor:"#ff8dda"}),r.a.createElement("div",{class:"audio-rec-wrap"},r.a.createElement("form",null,r.a.createElement("input",{className:"searchBar searchTerm",value:this.state.hashtag,onChange:this.handleChange,name:"comment",type:"text",placeholder:"insert audio name"})),r.a.createElement("div",{className:"record-buttons"},r.a.createElement("button",{style:{userSelect:"none",WebkitUserSelect:"none"},className:"recButton",type:"button",onMouseDown:this.startRecording,onMouseUp:this.stopRecording,onTouchStart:this.startRecording,onTouchEnd:this.stopRecording},r.a.createElement("i",{className:"fas fa-microphone"}),"Record"),r.a.createElement("button",{style:{userSelect:"none"},className:"recButton popup",onClick:this.handleClick},r.a.createElement("i",{className:"far fa-save"})," Save"," ",r.a.createElement("span",{className:"popuptext",id:"myPopup"})))))}}]),t}(r.a.Component),A=(n.Component,function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={comment:"",comments:[]},a.handleChange=function(e){var t=e.target.value;a.setState({comment:t})},a.handleSubmit=function(e){e.preventDefault(),a.postComments(),a.setState({comment:""})},a.handleClick=function(e){e.preventDefault()},a.postComments=function(){N.addComments({comment:a.state.comment,audioId:a.props.audio._id}).then(function(){return a.fetchComments()})},a.fetchComments=function(){N.getComments(a.props.audio._id).then(function(e){a.setState({comments:e})}).catch(function(e){return console.log(e)})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchComments()}},{key:"render",value:function(){return r.a.createElement("div",{className:"comments"},r.a.createElement("div",{class:"comments-style"},this.state.comments.map(function(e){return r.a.createElement("div",{class:"comments"},r.a.createElement("p",null,e.owner.username,": ",e.comment))})),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{className:"searchBar searchTerm",value:this.state.comment,onChange:this.handleChange,name:"comment",type:"text"}),r.a.createElement("button",{className:"comments-button searchButton",type:"submit"},"post")))}}]),t}(n.Component)),R=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"audioWrapper2"},r.a.createElement("div",{className:"audioTitleWrapper"},r.a.createElement("img",{className:"audioImage",src:"/images/hashtag.svg",alt:"Hashtag"}),r.a.createElement("h2",{className:"audioTitle"},this.props.audio.hashtag)),r.a.createElement("div",{className:"audioFooter"},r.a.createElement("div",{class:"audio-seek-audiopost"},r.a.createElement("audio",{controls:!0,className:"audContrl",class:"audio-seek-audiopost"},r.a.createElement("source",{src:this.props.audio.videoURL,type:"audio/mpeg"}))))),r.a.createElement("div",{className:"audioWrapper",style:{marginBottom:"20px"}},r.a.createElement(A,{audio:this.props.audio})))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).fetchAudios=function(){N.getAudios(a.props.match.params.username).then(function(e){console.log("audios"),console.log(e),a.setState({audios:e})}).catch(function(e){return console.log(e)})},a.state={audios:[],username:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.audios.slice();return t.reverse(),r.a.createElement("div",{className:"PlayFeed"},r.a.createElement("header",{className:"Playfeed-header"},r.a.createElement("img",{src:"/images/earLogo.png",className:"profilpic",alt:"profilpic"}),this.state.audios&&this.state.audios[0]&&r.a.createElement("h4",{className:"username"},this.state.audios[0].userId.username," ")),r.a.createElement("div",{class:"playfeeds"},r.a.createElement("h4",null,"my sounds"),t.map(function(t){return r.a.createElement(R,Object.assign({audio:t},e.state))})))}},{key:"componentDidMount",value:function(){this.fetchAudios()}}]),t}(n.Component),U=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Feed"},r.a.createElement("h2",{className:"Feed-text"},"record here"),r.a.createElement(x,this.props))}}]),t}(n.Component),F=(n.Component,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleLogoutClick",value:function(e){N.logout()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"Title-logo"},r.a.createElement("div",null,r.a.createElement("div",{className:"App-title"},r.a.createElement(h.a,{to:"/",exact:!0},"AUDIOGRAM"))),r.a.createElement("div",{className:"break"}),r.a.createElement("div",{className:"signup-nav highNav"},!N.isLoggedIn()&&r.a.createElement(h.a,{to:"/signup"},"Signup")),r.a.createElement("div",{className:"login-nav highNav"},!N.isLoggedIn()&&r.a.createElement(h.a,{to:"/login"},"Login"),N.isLoggedIn()&&r.a.createElement(p.a,{to:"/",onClick:function(t){return e.handleLogoutClick(t)}},"Logout")))),r.a.createElement(g.a,null,r.a.createElement(f.a,{path:"/",exact:!0,component:w}),r.a.createElement(f.a,{path:"/comments",component:A}),r.a.createElement(f.a,{path:"/test",component:I}),r.a.createElement(f.a,{path:"/test2",component:L}),r.a.createElement(f.a,{path:"/signup",component:C}),r.a.createElement(f.a,{path:"/login",component:y}),r.a.createElement(f.a,{path:"/feed",render:function(e){return r.a.createElement(U,e)}}),r.a.createElement(f.a,{path:"/search",component:S}),r.a.createElement(f.a,{path:"/playfeed",exact:!0,render:function(e){return r.a.createElement(B,Object.assign({key:"1"},e))}}),r.a.createElement(f.a,{path:"/playfeed/:username",render:function(e){return r.a.createElement(B,e)}}),r.a.createElement(f.a,{render:function(){return r.a.createElement("h2",null,"404")}}))),r.a.createElement("footer",{className:"nav"},r.a.createElement("div",{className:"lowNav"},r.a.createElement("div",{className:"App-Header"}),N.isLoggedIn()&&r.a.createElement("span",null,r.a.createElement("div",{class:"low-nav-icons"},r.a.createElement(h.a,{to:"/feed"},r.a.createElement("i",{className:"fas fa-microphone fa-2x",style:{height:"80px"}})),r.a.createElement(h.a,{to:"/search"},r.a.createElement("i",{className:"fas fa-search navIcon fa-2x"})," "),r.a.createElement(h.a,{to:"/playfeed"},r.a.createElement("i",{className:"fas fa-headphones-alt fa-2x"})))),!N.isLoggedIn()&&r.a.createElement("span",null,r.a.createElement(h.a,{to:"/signup"},"Sign up"),r.a.createElement(h.a,{to:"/login"},"Log in")))))}}]),t}(n.Component));window.MediaRecorder||(window.MediaRecorder=a(57)),s.a.render(r.a.createElement(o.a,null,r.a.createElement(F,null)),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.314e29cf.chunk.js.map